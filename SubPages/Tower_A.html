<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../styles.css"><style>
        @media (max-width: 600px) {
            .Front {
                position: fixed;
                /* make .Front itself the viewport-anchored box */
                top: 55%;
                left: 50%;
            }
        }
    </style>
</head>

<body>
    <button class="close-btn" id="closeCard">‚Üê</button>
    <div id="infoCard" class="info-card">
        <div class="info-content">

            <h2 id="modalTitle">Tower_A</h2>

            <!-- <div class="image-placeholder">
                <img src="images/Tower_A.jpg" alt="Tower A" />
            </div> -->
            <div class="info-details" id="details"></div>

            <button class="explore-btn" id="navigateButton">Explore</button>
        </div>
    </div>
    <div class="Front">
        <div class="image-wrapper">
            <img src="../images/Tower_A.jpg" alt="Tower_2">
            <div class="Cutout">
                <svg viewBox="0 0 3840 5830" xmlns="http://www.w3.org/2000/svg">
                    <path id="Floor_1" data-link="3BHK/Lobby_Top.html"
                        d="m849.94 3735.52 1861.8-115.09v-5.94h-4.33l-7.23-68.66-1835 87.4-1.8 13.33-3.89 20.44 5.36.47-2.38 8.24h7.19l-7.86 36.02z"
                        class="st0" />
                    <path id="Floor_2" data-link="3BHK/Lobby_Top.html"
                        d="m865.18 3633.23 1835-87.4-.42-7.1 1.49-.2-.61-5.78h-2.24l.07-1.72 1.69-.34-.07-2.33h-2.44l.27-3.95h1.59s-.1-2.67-.2-2.67h-1.8l-.1-4.46h1.83l-.14-1.96-1.83.14.14-3.1h1.72l-.54-4.78h-2.26l-.05-5.45 1.45.27.23-3.11-2.03.77-.41-10.86-1886.72 54.38-5.51 44.33 69.83.63-1.81 6.58-4.7 2.7-1.17 4.32-1.54.27-1.17 6.31-1.81 4.05-.99 6.76 5.69-.72 15.36-1.26-.36 8.02z"
                        class="st0" />
                    <path id="Floor_3" data-link="3BHK/Lobby_Top.html"
                        d="m808.81 3543.57 1886.72-54.38-6.01-59.6-1902.8 22.3c22.2 17.86 34.18 39.04 30.22 65.42l5.83.14s-10.14 9.87-10.03 9.87 3.18.45 3.18.45l-5.44 6.26z"
                        class="st0" />
                    <path id="Floor_4" data-link="3BHK/Lobby_Top.html"
                        d="m786.72 3451.89 1902.8-22.3 1.26-.54v-1.55l-2.37.17.37-5.2h1.69l-.44-5.2-2.37-.47-.54-2.43 2.17-.57-.03-1.42-1.73.17.14-4.73 1.05-.17.03-2.09h-2.03l-.03-4.05 1.9-1.12-.75-1.25h-1.25l.2-2.26 1.56-.34-.81-5.3h-1.39l-.54-4.53 1.52.2.3-1.89h-2.37l-.78-10.9-1914.5-12.25-9.49 72.96c6.95 5.23 16.55 7.9 26.43 17.06"
                        class="st0" />
                    <path id="Floor_5" data-link="3BHK/Lobby_Top.html"
                        d="m769.78 3361.83 1914.5 12.25-4.06-43.7-1899.41-41.9z" class="st0" />
                    <path id="Floor_6" data-link="3BHK/Lobby_Top.html"
                        d="m780.81 3288.48 1899.41 41.9-.95-12.84 1.56-.4-.61-4.87-2.38.2.21-3.04h2.44l-.68-5.34-1.97.48.61-2.23h1.16l-.21-3.25-1.69.21-.88-8.52 1.29-.47-.21-4.53h-2.3l.95-7.23h-2.58l.34-2.03 1.9-1.69-.41-2.09-1883.62-69.86z"
                        class="st0" />
                    <path id="Floor_7" data-link="3BHK/Lobby_Top.html"
                        d="m792.19 3202.88 1883.62 69.86-6.03-53.19-1861.24-101.5-5.15 1.49-.68 8.11 3.93 8.78-5.96 41.09z"
                        class="st0" />
                    <path id="Floor_8" data-link="3BHK/Lobby_Top.html"
                        d="m808.54 3118.05 1861.24 101.5-5.19-57.39-1845.12-126.33-5.96 54.6-9.03-.9-.91 5.95 3.43 1.44 3.8 12.61z"
                        class="st0" />
                    <path id="Floor_9" data-link="3BHK/Lobby_Top.html"
                        d="m819.47 3035.83 1845.12 126.33-4.97-51.27-1831.29-160.03z" class="st0" />
                    <path id="Floor_10" data-link="3BHK/Lobby_Top.html"
                        d="m828.33 2950.86 1831.29 160.03-4.47-52.58-1810.56-185.75-9.4 57.84z" class="st0" />
                    <path id="Floor_11" data-link="3BHK/Lobby_Top.html"
                        d="m844.59 2872.56 1810.56 185.75-5.15-51.77-1794.93-211.66z" class="st0" />
                    <path id="Floor_12" data-link="3BHK/Lobby_Top.html"
                        d="M855.07 2794.88 2650 3006.54l-4.2-49.65-1780.44-237.51-1.62 9.55-7.23-.9-1.44 6.66 2.34 2.35 1.63 19.64-5.42-1.8-1.08 7.57 3.61 22.34z"
                        class="st0" />
                    <path id="Floor_13" data-link="3BHK/Lobby_Top.html"
                        d="m865.36 2719.38 1780.44 237.51-4.79-51.36-1765.8-261.75z" class="st0" />
                    <path id="Floor_14" data-link="3BHK/Lobby_Top.html"
                        d="m875.21 2643.78 1765.8 261.75-4.56-47.93L881.9 2571.87l.72 12.89-5.24.09-.63 6.76 2.53 26.04z"
                        class="st0" />
                    <path id="Floor_15" data-link="3BHK/Lobby_Top.html"
                        d="m881.9 2571.87 1754.55 285.73-5.56-51.36L895.9 2500.06l-6.87 58.93-8.31-.72z" class="st0" />
                    <path id="Floor_16" data-link="3BHK/Lobby_Top.html"
                        d="m895.9 2500.06 1734.99 306.18-2.98-47.44-1727.4-330.74 1.89 30.73z" class="st0" />
                    <path id="Floor_17" data-link="3BHK/Lobby_Top.html"
                        d="m900.51 2428.06 1727.4 330.74v-1.94l2.98-.45-4.25-61.45-34.14-8.02-28.1 11.35-1652.06-341.23-2.8 20.09 3.71-.09-1.72 20.55-7.05-.18.09 5.94.63 19.2-4.69-.36z"
                        class="st0" />
                    <path id="Floor_18" data-link="3BHK/Lobby_Top.html"
                        d="m912.34 2357.06 1568.44 323.96-3.9-51.64-1555.05-337.69z" class="st0" />
                    <path id="Floor_19" data-name="Floor_19" data-link="Penthouse/Lobby_Top_Floor_1.html"
                        d="m921.83 2291.69 1555.05 337.69-3.27-47.33L930.05 2227.4z" class="st0" />
                    <path id="Floor_20" data-name="Floor_20" data-link="Penthouse/Lobby_Top_Floor_1.html"
                        d="m930.05 2227.4 1543.56 354.66-7.14-106.42 81.03-45.19v-2.7l1.63.9 1.08-2.7 2.98-.27-72.41-36.62-1502.04-444.5-.27 2.79-67.03-.99s.36 3.42 0 3.42 1.9.81 1.9.81l1.08 225.08 26.65 6.67-.45 4.6-3.43-.36z"
                        class="st0" />
                </svg>
            </div>
        </div>
        <script>
            window.addEventListener('DOMContentLoaded', () => {
                const paths = document.querySelectorAll('.Cutout path');
                const infoCard = document.getElementById('infoCard');
                const modalTitle = document.getElementById('modalTitle');
                const modalButton = document.getElementById('navigateButton');
                const closeCard = document.getElementById('closeCard');
                const detailsEl = document.getElementById('details');

                let selectedPath = null;
                let currentLink = '';

                function updateDetailsFromName(name) {
                    if (!detailsEl) return;
                    const match = (name || '').match(/\d+/);
                    const floorNum = match ? parseInt(match[0], 10) : null;

                    if (floorNum === 19 || floorNum === 20) {
                        detailsEl.innerHTML = `
    <div>
      <span><strong>Total Units:</strong></span>
      <span>4</span>
    </div>
    <div>
      <span><strong>Size:</strong></span>
      <span>3 BHK<br>2 Floor<br>2 Lobby</span>
    </div>
  `;
                    }
                    else {
                        detailsEl.innerHTML = `
          <div>
            <span><strong>Total Units:</strong></span>
            <span>8</span>
          </div>
          <div>
            <span><strong>Size:</strong></span>
            <span>3 BHK + 1</span>
          </div>
        `;
                    }
                }

                function setExploreState(hasLink) {
                    if (!modalButton) return;
                    modalButton.disabled = !hasLink;
                    modalButton.style.opacity = hasLink ? '1' : '0.6';
                    modalButton.style.pointerEvents = hasLink ? 'auto' : 'none';
                    modalButton.title = hasLink ? '' : 'No page linked for this floor';
                }

                // Path click -> open card, set title, details, link
                paths.forEach(path => {
                    path.addEventListener('click', (e) => {
                        e.stopPropagation();

                        // Deselect previous
                        if (selectedPath && selectedPath !== path) {
                            selectedPath.classList.remove('selected');
                        }

                        // Toggle current
                        if (path.classList.contains('selected')) {
                            path.classList.remove('selected');
                            infoCard.style.display = 'none';
                            selectedPath = null;
                            currentLink = '';
                            modalTitle.textContent = '~';
                            setExploreState(false);
                        } else {
                            path.classList.add('selected');
                            selectedPath = path;

                            // Title
                            const name = path.getAttribute('data-name') || path.id || 'Info';
                            modalTitle.textContent = name;

                            // Details
                            updateDetailsFromName(name);

                            // Link (relative, strip leading slash if any)
                            const link = path.getAttribute('data-link') || '';
                            currentLink = link.replace(/^\//, '');
                            setExploreState(!!currentLink);

                            // Show modal
                            infoCard.style.display = 'flex';
                        }
                    });
                });

                // Explore -> navigate
                if (modalButton) {
                    modalButton.addEventListener('click', () => {
                        if (currentLink) {
                            window.location.href = currentLink;
                        }
                    });
                }

                // Close button -> hide & reset
                if (closeCard) {
                    closeCard.addEventListener('click', () => {
                        infoCard.style.display = 'none';
                        if (selectedPath) {
                            selectedPath.classList.remove('selected');
                            selectedPath = null;
                        }
                        currentLink = '';
                        modalTitle.textContent = '~';
                        setExploreState(false);
                    });
                }

                // Click outside -> hide & reset
                document.addEventListener('click', (e) => {
                    const isPath = e.target.closest('path');
                    const isModal = e.target.closest('.info-content');
                    if (!isPath && !isModal) {
                        infoCard.style.display = 'none';
                        if (selectedPath) {
                            selectedPath.classList.remove('selected');
                            selectedPath = null;
                        }
                        currentLink = '';
                        modalTitle.textContent = '~';
                        setExploreState(false);
                    }
                });
            });
        </script>


        <script>
            if (closeCard) {
                closeCard.addEventListener('click', () => {
                    window.location.href = "../index.html";
                });
            }
        </script>

</body>

</html>